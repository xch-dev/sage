@tailwind base;
@tailwind components;
@tailwind utilities;

html {
  overscroll-behavior: none;
  background-color: transparent;
}

body {
  background-color: transparent;
}

@layer base {
  :root {
    /* Default light theme - these will be overridden by the theme system */
    --background: hsl(0 0% 100%);
    --foreground: hsl(0 0% 3.9%);
    --card: hsl(0 0% 98%);
    --card-foreground: hsl(0 0% 3.9%);
    --popover: hsl(0 0% 100%);
    --popover-foreground: hsl(0 0% 3.9%);
    --primary: hsl(0 0% 9%);
    --primary-foreground: hsl(0 0% 98%);
    --secondary: hsl(0 0% 96.1%);
    --secondary-foreground: hsl(0 0% 9%);
    --muted: hsl(0 0% 96.1%);
    --muted-foreground: hsl(0 0% 45.1%);
    --accent: hsl(0 0% 96.1%);
    --accent-foreground: hsl(0 0% 9%);
    --destructive: hsl(0 84.2% 60.2%);
    --destructive-foreground: hsl(0 0% 98%);
    --border: hsl(0 0% 89.8%);
    --input: hsl(0 0% 89.8%);
    --input-background: hsl(0 0% 100%);
    --ring: hsl(0 0% 3.9%);
    --chart-1: hsl(12 76% 61%);
    --chart-2: hsl(173 58% 39%);
    --chart-3: hsl(197 37% 24%);
    --chart-4: hsl(43 74% 66%);
    --chart-5: hsl(27 87% 67%);
    --radius: 0.5rem;

    /* Default font families */
    --font-sans: Inter, system-ui, sans-serif;
    --font-serif: Georgia, serif;
    --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
      Liberation Mono, Courier New, monospace;
    --font-heading: Inter, system-ui, sans-serif;
    --font-body: Inter, system-ui, sans-serif;

    /* Default corner radius values */
    --corner-none: 0px;
    --corner-sm: 0.125rem;
    --corner-md: 0.375rem;
    --corner-lg: 0.5rem;
    --corner-xl: 0.75rem;
    --corner-full: 9999px;

    /* Default shadow values */
    --shadow-none: none;
    --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
    --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1),
      0 2px 4px -2px rgb(0 0 0 / 0.1);
    --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1),
      0 4px 6px -4px rgb(0 0 0 / 0.1);
    --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1),
      0 8px 10px -6px rgb(0 0 0 / 0.1);
    --shadow-inner: inset 0 2px 4px 0 rgb(0 0 0 / 0.05);
    --shadow-card: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
    --shadow-button: 0 1px 2px 0 rgb(0 0 0 / 0.05);
    --shadow-dropdown: 0 4px 6px -1px rgb(0 0 0 / 0.1),
      0 2px 4px -2px rgb(0 0 0 / 0.1);

    /* Default backdrop-filter values */
    --card-backdrop-filter: none;
    --card-backdrop-filter-webkit: none;
    --popover-backdrop-filter: none;
    --popover-backdrop-filter-webkit: none;
    --surface-backdrop-filter: none;
    --surface-backdrop-filter-webkit: none;
    --input-backdrop-filter: none;
    --input-backdrop-filter-webkit: none;
    --table-header-backdrop-filter: none;
    --table-header-backdrop-filter-webkit: none;
    --table-row-backdrop-filter: none;
    --table-row-backdrop-filter-webkit: none;
    --table-footer-backdrop-filter: none;
    --table-footer-backdrop-filter-webkit: none;

    /* Button-specific CSS variables with defaults */
    --btn-default-bg: var(--primary);
    --btn-default-color: var(--primary-foreground);
    --btn-default-border: none;
    --btn-default-border-style: solid;
    --btn-default-border-width: 0;
    --btn-default-border-color: transparent;
    --btn-default-radius: var(--radius);
    --btn-default-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05);
    --btn-default-backdrop-filter: none;
    --btn-default-backdrop-filter-webkit: none;
    --btn-default-hover-bg: var(--primary);
    --btn-default-hover-color: var(--primary-foreground);
    --btn-default-hover-transform: none;
    --btn-default-hover-border-style: solid;
    --btn-default-hover-border-color: transparent;
    --btn-default-hover-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05);
    --btn-default-active-bg: var(--primary);
    --btn-default-active-color: var(--primary-foreground);
    --btn-default-active-transform: none;
    --btn-default-active-border-style: solid;
    --btn-default-active-border-color: transparent;
    --btn-default-active-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05);

    --btn-outline-bg: transparent;
    --btn-outline-color: var(--foreground);
    --btn-outline-border: 1px solid var(--border);
    --btn-outline-border-style: solid;
    --btn-outline-border-width: 1px;
    --btn-outline-border-color: var(--border);
    --btn-outline-radius: var(--radius);
    --btn-outline-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05);
    --btn-outline-backdrop-filter: none;
    --btn-outline-backdrop-filter-webkit: none;
    --btn-outline-hover-bg: var(--accent);
    --btn-outline-hover-color: var(--accent-foreground);
    --btn-outline-hover-transform: none;
    --btn-outline-hover-border-style: solid;
    --btn-outline-hover-border-color: var(--border);
    --btn-outline-hover-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05);
    --btn-outline-active-bg: var(--accent);
    --btn-outline-active-color: var(--accent-foreground);
    --btn-outline-active-transform: none;
    --btn-outline-active-border-style: solid;
    --btn-outline-active-border-color: var(--border);
    --btn-outline-active-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05);

    --btn-secondary-bg: var(--secondary);
    --btn-secondary-color: var(--secondary-foreground);
    --btn-secondary-border: none;
    --btn-secondary-border-style: solid;
    --btn-secondary-border-width: 0;
    --btn-secondary-border-color: transparent;
    --btn-secondary-radius: var(--radius);
    --btn-secondary-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05);
    --btn-secondary-backdrop-filter: none;
    --btn-secondary-backdrop-filter-webkit: none;
    --btn-secondary-hover-bg: var(--secondary);
    --btn-secondary-hover-color: var(--secondary-foreground);
    --btn-secondary-hover-transform: none;
    --btn-secondary-hover-border-style: solid;
    --btn-secondary-hover-border-color: transparent;
    --btn-secondary-hover-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05);
    --btn-secondary-active-bg: var(--secondary);
    --btn-secondary-active-color: var(--secondary-foreground);
    --btn-secondary-active-transform: none;
    --btn-secondary-active-border-style: solid;
    --btn-secondary-active-border-color: transparent;
    --btn-secondary-active-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05);

    --btn-destructive-backdrop-filter: none;
    --btn-destructive-backdrop-filter-webkit: none;
    --btn-ghost-backdrop-filter: none;
    --btn-ghost-backdrop-filter-webkit: none;
    --btn-link-backdrop-filter: none;
    --btn-link-backdrop-filter-webkit: none;

    /* Theme-specific button style flags */
    --theme-has-gradient-buttons: 0;
    --theme-has-shimmer-effects: 0;
    --theme-has-pixel-art: 0;
    --theme-has-3d-effects: 0;
    --theme-has-rounded-buttons: 0;

    /* Navigation active background */
    --nav-active-bg: var(--primary);

    /* Sidebar styling variables with defaults */
    --sidebar-background: transparent;
    --sidebar-backdrop-filter: none;
    --sidebar-backdrop-filter-webkit: none;
    --sidebar-border: var(--border);

    /* Table styling variables with defaults */
    --table-background: transparent;
    --table-border: 1px solid var(--border);
    --table-border-radius: var(--radius);
    --table-box-shadow: var(--shadow-sm);
    --table-header-background: transparent;
    --table-header-color: var(--muted-foreground);
    --table-header-font-weight: 500;
    --table-header-font-size: 0.875rem;
    --table-row-background: transparent;
    --table-row-color: var(--foreground);
    --table-row-border: 1px solid var(--border);
    --table-row-hover-background: var(--muted);
    --table-row-hover-color: var(--foreground);
    --table-row-selected-background: var(--accent);
    --table-row-selected-color: var(--accent-foreground);
    --table-cell-padding: 0.5rem;
    --table-cell-border: none;
    --table-cell-font-size: 0.875rem;
    --table-footer-background: var(--muted);
    --table-footer-color: var(--muted-foreground);
    --table-footer-border: 1px solid var(--border);
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
  body.has-background-image {
    background-image: var(--background-image);
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    background-attachment: fixed;
  }

  /* Make backgrounds semi-transparent when background image is present */
  body.has-background-image {
    background-color: var(--background-transparent);
  }

  body.has-background-image .bg-card {
    background-color: var(--card-transparent) !important;
  }

  body.has-background-image .bg-background {
    background-color: var(--background-transparent) !important;
  }

  body.has-background-image .bg-popover {
    background-color: var(--popover-transparent) !important;
  }

  /* Theme cards with background images */
  .has-background-image.bg-card {
    background-color: var(--card);
  }

  /* Dynamic outline button styling for all themes */
  .outline-btn {
    background-color: var(--outline-button-bg);
  }
}

/* Dynamic theme-specific button variant overrides */
@layer components {
  /* Theme-aware button variant that uses CSS variables */
  .btn-variant-theme {
    background: var(--btn-default-bg);
    color: var(--btn-default-color);
    border: var(--btn-default-border-width) var(--btn-default-border-style)
      var(--btn-default-border-color);
    border-radius: var(--btn-default-radius);
    box-shadow: var(--btn-default-shadow);
    backdrop-filter: var(--btn-default-backdrop-filter);
    -webkit-backdrop-filter: var(--btn-default-backdrop-filter-webkit);
    transition: all 0.2s ease;
  }

  .btn-variant-theme:hover {
    background: var(--btn-default-hover-bg);
    color: var(--btn-default-hover-color);
    transform: var(--btn-default-hover-transform);
    border-style: var(--btn-default-hover-border-style);
    border-color: var(--btn-default-hover-border-color);
    box-shadow: var(--btn-default-hover-shadow);
  }

  .btn-variant-theme:active {
    background: var(--btn-default-active-bg);
    color: var(--btn-default-active-color);
    transform: var(--btn-default-active-transform);
    border-style: var(--btn-default-active-border-style);
    border-color: var(--btn-default-active-border-color);
    box-shadow: var(--btn-default-active-shadow);
  }

  /* Gradient buttons - applied when theme has gradient flag */
  .btn-variant-default[data-theme-style*='gradient'] {
    background: linear-gradient(135deg, var(--primary), var(--accent));
    color: var(--primary-foreground);
    border: 1px solid var(--border);
  }

  /* Shimmer effects - applied when theme has shimmer flag */
  .btn-variant-outline[data-theme-style*='shimmer'] {
    background: transparent;
    border: 1px solid var(--primary);
    color: var(--primary);
    position: relative;
    overflow: hidden;
    opacity: 0.8;
  }

  .btn-variant-outline[data-theme-style*='shimmer']::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(
      90deg,
      transparent,
      var(--primary),
      transparent
    );
    opacity: 0.2;
    transition: left 0.3s ease;
  }

  .btn-variant-outline[data-theme-style*='shimmer']:hover {
    border-color: var(--primary);
    color: var(--primary);
    opacity: 1;
  }

  .btn-variant-outline[data-theme-style*='shimmer']:hover::before {
    left: 100%;
  }

  /* Pixel art style - applied when theme has pixel-art flag */
  .btn-variant-default[data-theme-style*='pixel-art'] {
    background: var(--primary);
    color: var(--primary-foreground);
    border: 2px solid var(--foreground);
    box-shadow: 2px 2px 0 var(--foreground);
  }

  .btn-variant-default[data-theme-style*='pixel-art']:hover {
    transform: translate(1px, 1px);
    box-shadow: 1px 1px 0 var(--foreground);
  }

  .btn-variant-outline[data-theme-style*='pixel-art'] {
    background: transparent;
    border: 2px solid var(--foreground);
    color: var(--foreground);
    box-shadow: 2px 2px 0 var(--foreground);
  }

  /* 3D effects - applied when theme has 3d-effects flag */
  .btn-variant-default[data-theme-style*='3d-effects'] {
    background: var(--muted);
    color: var(--foreground);
    border: 2px outset var(--border);
    box-shadow:
      inset 1px 1px 0 var(--background),
      inset -1px -1px 0 var(--muted-foreground);
  }

  .btn-variant-default[data-theme-style*='3d-effects']:active {
    border-style: inset;
    box-shadow:
      inset 1px 1px 0 var(--muted-foreground),
      inset -1px -1px 0 var(--background);
  }

  .btn-variant-outline[data-theme-style*='3d-effects'] {
    background: var(--background);
    border: 2px outset var(--border);
    color: var(--foreground);
  }

  /* Rounded buttons - applied when theme has rounded-buttons flag */
  .btn-variant-default[data-theme-style*='rounded-buttons'] {
    background: var(--primary);
    color: var(--primary-foreground);
    border-radius: 12px;
    border: 1px solid var(--border);
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
  }

  .btn-variant-outline[data-theme-style*='rounded-buttons'] {
    background: var(--background);
    color: var(--foreground);
    border: 1px solid var(--border);
    border-radius: 12px;
  }

  /* Custom switch styling */
  .peer[data-state='checked'] {
    background-color: var(--switch-checked-bg) !important;
  }

  .peer[data-state='unchecked'] {
    background-color: var(--switch-unchecked-bg) !important;
  }

  /* Theme-aware table styling */
  .table-theme {
    background: var(--table-background);
    border: var(--table-border);
    border-radius: var(--table-border-radius);
    box-shadow: var(--table-box-shadow);
  }

  .table-theme thead th {
    background: var(--table-header-background);
    color: var(--table-header-color);
    border: var(--table-header-border);
    font-weight: var(--table-header-font-weight);
    font-size: var(--table-header-font-size);
  }

  .table-theme tbody tr {
    background: var(--table-row-background);
    color: var(--table-row-color);
    border: var(--table-row-border);
    backdrop-filter: var(--table-row-backdrop-filter);
    -webkit-backdrop-filter: var(--table-row-backdrop-filter-webkit);
  }

  .table-theme tbody tr:hover {
    background: var(--table-row-hover-background);
    color: var(--table-row-hover-color);
  }

  .table-theme tbody tr[data-state='selected'] {
    background: var(--table-row-selected-background);
    color: var(--table-row-selected-color);
  }

  .table-theme tbody td {
    padding: var(--table-cell-padding);
    border: var(--table-cell-border);
    font-size: var(--table-cell-font-size);
  }

  .table-theme tfoot th {
    background: var(--table-footer-background);
    color: var(--table-footer-color);
    border: var(--table-footer-border);
  }

  /* Backdrop filter utility classes */
  .backdrop-blur-card {
    backdrop-filter: var(--card-backdrop-filter);
    -webkit-backdrop-filter: var(--card-backdrop-filter-webkit);
  }
  
  .backdrop-blur-popover {
    backdrop-filter: var(--popover-backdrop-filter);
    -webkit-backdrop-filter: var(--popover-backdrop-filter-webkit);
  }
  
  .backdrop-blur-surface {
    backdrop-filter: var(--surface-backdrop-filter);
    -webkit-backdrop-filter: var(--surface-backdrop-filter-webkit);
  }
  
  .backdrop-blur-input {
    backdrop-filter: var(--input-backdrop-filter);
    -webkit-backdrop-filter: var(--input-backdrop-filter-webkit);
  }

  /* Apply backdrop filters to existing components */
  .bg-card {
    backdrop-filter: var(--card-backdrop-filter);
    -webkit-backdrop-filter: var(--card-backdrop-filter-webkit);
  }

  .bg-popover {
    backdrop-filter: var(--popover-backdrop-filter);
    -webkit-backdrop-filter: var(--popover-backdrop-filter-webkit);
  }

  .bg-input,
  input[type="text"],
  input[type="password"],
  input[type="email"],
  input[type="number"],
  textarea,
  select {
    backdrop-filter: var(--input-backdrop-filter);
    -webkit-backdrop-filter: var(--input-backdrop-filter-webkit);
  }

  .table-theme thead th {
    backdrop-filter: var(--table-header-backdrop-filter);
    -webkit-backdrop-filter: var(--table-header-backdrop-filter-webkit);
  }

  .table-theme tfoot th {
    backdrop-filter: var(--table-footer-backdrop-filter);
    -webkit-backdrop-filter: var(--table-footer-backdrop-filter-webkit);
  }
}

@keyframes pulsate-opacity {
  0% {
    opacity: 0.6;
  }
  50% {
    opacity: 0.3;
  }
  100% {
    opacity: 0.6;
  }
}

.pulsate-opacity {
  animation: pulsate-opacity 1.5s infinite;
}
